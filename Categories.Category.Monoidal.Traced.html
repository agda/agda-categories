<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Categories.Category.Monoidal.Traced</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--without-K</a> <a id="25" class="Pragma">--safe</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">open</a> <a id="42" class="Keyword">import</a> <a id="49" href="Categories.Category.html" class="Module">Categories.Category</a>
<a id="69" class="Keyword">open</a> <a id="74" class="Keyword">import</a> <a id="81" href="Categories.Category.Monoidal.html" class="Module">Categories.Category.Monoidal</a>

<a id="111" class="Keyword">module</a> <a id="118" href="Categories.Category.Monoidal.Traced.html" class="Module">Categories.Category.Monoidal.Traced</a> <a id="154" class="Symbol">{</a><a id="155" href="Categories.Category.Monoidal.Traced.html#155" class="Bound">o</a> <a id="157" href="Categories.Category.Monoidal.Traced.html#157" class="Bound">ℓ</a> <a id="159" href="Categories.Category.Monoidal.Traced.html#159" class="Bound">e</a><a id="160" class="Symbol">}</a> <a id="162" class="Symbol">{</a><a id="163" href="Categories.Category.Monoidal.Traced.html#163" class="Bound">C</a> <a id="165" class="Symbol">:</a> <a id="167" href="Categories.Category.Core.html#442" class="Record">Category</a> <a id="176" href="Categories.Category.Monoidal.Traced.html#155" class="Bound">o</a> <a id="178" href="Categories.Category.Monoidal.Traced.html#157" class="Bound">ℓ</a> <a id="180" href="Categories.Category.Monoidal.Traced.html#159" class="Bound">e</a><a id="181" class="Symbol">}</a> <a id="183" class="Symbol">(</a><a id="184" href="Categories.Category.Monoidal.Traced.html#184" class="Bound">M</a> <a id="186" class="Symbol">:</a> <a id="188" href="Categories.Category.Monoidal.Core.html#1287" class="Record">Monoidal</a> <a id="197" href="Categories.Category.Monoidal.Traced.html#163" class="Bound">C</a><a id="198" class="Symbol">)</a> <a id="200" class="Keyword">where</a>

<a id="207" class="Keyword">open</a> <a id="212" href="Categories.Category.Core.html#442" class="Module">Category</a> <a id="221" href="Categories.Category.Monoidal.Traced.html#163" class="Bound">C</a>

<a id="224" class="Keyword">open</a> <a id="229" class="Keyword">import</a> <a id="236" href="Level.html" class="Module">Level</a>

<a id="243" class="Keyword">open</a> <a id="248" class="Keyword">import</a> <a id="255" href="Data.Product.html" class="Module">Data.Product</a> <a id="268" class="Keyword">using</a> <a id="274" class="Symbol">(</a><a id="275" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="278" class="Symbol">)</a>

<a id="281" class="Keyword">open</a> <a id="286" class="Keyword">import</a> <a id="293" href="Categories.Category.Monoidal.Symmetric.html" class="Module">Categories.Category.Monoidal.Symmetric</a> <a id="332" href="Categories.Category.Monoidal.Traced.html#184" class="Bound">M</a>
<a id="334" class="Keyword">open</a> <a id="339" class="Keyword">import</a> <a id="346" href="Categories.Category.Monoidal.Reasoning.html" class="Module">Categories.Category.Monoidal.Reasoning</a> <a id="385" href="Categories.Category.Monoidal.Traced.html#184" class="Bound">M</a>

<a id="388" class="Keyword">private</a>
  <a id="398" class="Keyword">variable</a>
    <a id="411" href="Categories.Category.Monoidal.Traced.html#411" class="Generalizable">A</a> <a id="413" href="Categories.Category.Monoidal.Traced.html#413" class="Generalizable">B</a> <a id="415" href="Categories.Category.Monoidal.Traced.html#415" class="Generalizable">X</a> <a id="417" href="Categories.Category.Monoidal.Traced.html#417" class="Generalizable">Y</a> <a id="419" class="Symbol">:</a> <a id="421" href="Categories.Category.Core.html#559" class="Function">Obj</a>
    <a id="429" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="431" href="Categories.Category.Monoidal.Traced.html#431" class="Generalizable">g</a> <a id="433" class="Symbol">:</a> <a id="435" href="Categories.Category.Monoidal.Traced.html#411" class="Generalizable">A</a> <a id="437" href="Categories.Category.Core.html#575" class="Function Operator">⇒</a> <a id="439" href="Categories.Category.Monoidal.Traced.html#413" class="Generalizable">B</a>

<a id="442" class="Comment">------------------------------------------------------------------------------</a>
<a id="521" class="Comment">-- Def from Traced monoidal categories (Joyal, Street, &amp; Verity, 1996)</a>
<a id="592" class="Comment">--</a>
<a id="595" class="Comment">-- A symmetric monoidal category (C,⊗,1,b) (where b is the symmetry) is</a>
<a id="667" class="Comment">-- said to be traced if it is equipped with a natural family* of functions</a>
<a id="742" class="Comment">--</a>
<a id="745" class="Comment">-- TrXA,B:C(A⊗X,B⊗X)→C(A,B)</a>
<a id="773" class="Comment">-- satisfying three axioms:</a>
<a id="801" class="Comment">--</a>
<a id="804" class="Comment">-- Vanishing: Tr1A,B(f)=f (for all f:A→B) and</a>
<a id="850" class="Comment">-- TrX⊗YA,B=TrXA,B(TrYA⊗X,B⊗X(f)) (for all f:A⊗X⊗Y→B⊗X⊗Y)</a>
<a id="908" class="Comment">--</a>
<a id="911" class="Comment">-- Superposing: TrXC⊗A,C⊗B(idC⊗f)=idC⊗TrXA,B(f) (for all f:A⊗X→B⊗X)</a>
<a id="979" class="Comment">--</a>
<a id="982" class="Comment">-- Yanking: TrXX,X(bX,X)=idX</a>
<a id="1011" class="Comment">--</a>
<a id="1014" class="Comment">-- (*) this means the family needs to be &quot;natural&quot; in A, B, and X!</a>

<a id="1082" class="Comment">-- Traced monoidal category</a>
<a id="1110" class="Comment">--  is a symmetric monoidal category with a trace operation</a>
<a id="1170" class="Comment">--</a>
<a id="1173" class="Comment">-- note that the definition in this library is significantly easier than the previous one because</a>
<a id="1271" class="Comment">-- we adopt a simpler definition of monoidal category to begin with.</a>
<a id="1340" class="Keyword">record</a> <a id="Traced"></a><a id="1347" href="Categories.Category.Monoidal.Traced.html#1347" class="Record">Traced</a> <a id="1354" class="Symbol">:</a> <a id="1356" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1360" class="Symbol">(</a><a id="1361" href="Level.html#602" class="Function">levelOfTerm</a> <a id="1373" href="Categories.Category.Monoidal.Traced.html#184" class="Bound">M</a><a id="1374" class="Symbol">)</a> <a id="1376" class="Keyword">where</a>
  <a id="1384" class="Keyword">field</a>
    <a id="Traced.symmetric"></a><a id="1394" href="Categories.Category.Monoidal.Traced.html#1394" class="Field">symmetric</a> <a id="1404" class="Symbol">:</a> <a id="1406" href="Categories.Category.Monoidal.Symmetric.html#997" class="Record">Symmetric</a>

  <a id="1419" class="Keyword">open</a> <a id="1424" href="Categories.Category.Monoidal.Symmetric.html#997" class="Module">Symmetric</a> <a id="1434" href="Categories.Category.Monoidal.Traced.html#1394" class="Field">symmetric</a> <a id="1444" class="Keyword">public</a>

  <a id="1454" class="Keyword">field</a>
    <a id="Traced.trace"></a><a id="1464" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1470" class="Symbol">:</a> <a id="1472" class="Symbol">∀</a> <a id="1474" class="Symbol">{</a><a id="1475" href="Categories.Category.Monoidal.Traced.html#1475" class="Bound">X</a> <a id="1477" href="Categories.Category.Monoidal.Traced.html#1477" class="Bound">A</a> <a id="1479" href="Categories.Category.Monoidal.Traced.html#1479" class="Bound">B</a><a id="1480" class="Symbol">}</a> <a id="1482" class="Symbol">→</a> <a id="1484" href="Categories.Category.Monoidal.Traced.html#1477" class="Bound">A</a> <a id="1486" href="Categories.Category.Monoidal.Core.html#1435" class="Function Operator">⊗₀</a> <a id="1489" href="Categories.Category.Monoidal.Traced.html#1475" class="Bound">X</a> <a id="1491" href="Categories.Category.Core.html#575" class="Function Operator">⇒</a> <a id="1493" href="Categories.Category.Monoidal.Traced.html#1479" class="Bound">B</a> <a id="1495" href="Categories.Category.Monoidal.Core.html#1435" class="Function Operator">⊗₀</a> <a id="1498" href="Categories.Category.Monoidal.Traced.html#1475" class="Bound">X</a> <a id="1500" class="Symbol">→</a> <a id="1502" href="Categories.Category.Monoidal.Traced.html#1477" class="Bound">A</a> <a id="1504" href="Categories.Category.Core.html#575" class="Function Operator">⇒</a> <a id="1506" href="Categories.Category.Monoidal.Traced.html#1479" class="Bound">B</a>
    <a id="Traced.trace-resp-≈"></a><a id="1512" href="Categories.Category.Monoidal.Traced.html#1512" class="Field">trace-resp-≈</a> <a id="1525" class="Symbol">:</a> <a id="1527" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="1529" href="Categories.Category.Core.html#595" class="Function Operator">≈</a> <a id="1531" href="Categories.Category.Monoidal.Traced.html#431" class="Generalizable">g</a> <a id="1533" class="Symbol">→</a> <a id="1535" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1541" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="1543" href="Categories.Category.Core.html#595" class="Function Operator">≈</a> <a id="1545" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1551" href="Categories.Category.Monoidal.Traced.html#431" class="Generalizable">g</a>

    <a id="1558" class="Comment">-- dinaturality in X</a>
    <a id="Traced.slide"></a><a id="1583" href="Categories.Category.Monoidal.Traced.html#1583" class="Field">slide</a> <a id="1589" class="Symbol">:</a> <a id="1591" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1597" class="Symbol">(</a><a id="1598" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="1600" href="Categories.Category.Core.html#656" class="Function Operator">∘</a> <a id="1602" href="Categories.Category.Core.html#630" class="Function">id</a> <a id="1605" href="Categories.Category.Monoidal.Core.html#1536" class="Function Operator">⊗₁</a> <a id="1608" href="Categories.Category.Monoidal.Traced.html#431" class="Generalizable">g</a><a id="1609" class="Symbol">)</a> <a id="1611" href="Categories.Category.Core.html#595" class="Function Operator">≈</a> <a id="1613" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1619" class="Symbol">(</a><a id="1620" href="Categories.Category.Core.html#630" class="Function">id</a> <a id="1623" href="Categories.Category.Monoidal.Core.html#1536" class="Function Operator">⊗₁</a> <a id="1626" href="Categories.Category.Monoidal.Traced.html#431" class="Generalizable">g</a> <a id="1628" href="Categories.Category.Core.html#656" class="Function Operator">∘</a> <a id="1630" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a><a id="1631" class="Symbol">)</a>
    <a id="1637" class="Comment">-- naturality in A and B</a>
    <a id="Traced.tightenₗ"></a><a id="1666" href="Categories.Category.Monoidal.Traced.html#1666" class="Field">tightenₗ</a> <a id="1675" class="Symbol">:</a> <a id="1677" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1683" class="Symbol">(</a><a id="1684" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="1686" href="Categories.Category.Monoidal.Core.html#1536" class="Function Operator">⊗₁</a> <a id="1689" href="Categories.Category.Core.html#630" class="Function">id</a> <a id="1692" href="Categories.Category.Core.html#656" class="Function Operator">∘</a> <a id="1694" href="Categories.Category.Monoidal.Traced.html#431" class="Generalizable">g</a><a id="1695" class="Symbol">)</a> <a id="1697" href="Categories.Category.Core.html#595" class="Function Operator">≈</a> <a id="1699" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="1701" href="Categories.Category.Core.html#656" class="Function Operator">∘</a> <a id="1703" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1709" href="Categories.Category.Monoidal.Traced.html#431" class="Generalizable">g</a>
    <a id="Traced.tightenᵣ"></a><a id="1715" href="Categories.Category.Monoidal.Traced.html#1715" class="Field">tightenᵣ</a> <a id="1724" class="Symbol">:</a> <a id="1726" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1732" class="Symbol">(</a><a id="1733" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="1735" href="Categories.Category.Core.html#656" class="Function Operator">∘</a> <a id="1737" href="Categories.Category.Monoidal.Traced.html#431" class="Generalizable">g</a> <a id="1739" href="Categories.Category.Monoidal.Core.html#1536" class="Function Operator">⊗₁</a> <a id="1742" href="Categories.Category.Core.html#630" class="Function">id</a><a id="1744" class="Symbol">)</a> <a id="1746" href="Categories.Category.Core.html#595" class="Function Operator">≈</a> <a id="1748" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1754" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="1756" href="Categories.Category.Core.html#656" class="Function Operator">∘</a> <a id="1758" href="Categories.Category.Monoidal.Traced.html#431" class="Generalizable">g</a>

    <a id="Traced.vanishing₁"></a><a id="1765" href="Categories.Category.Monoidal.Traced.html#1765" class="Field">vanishing₁</a>  <a id="1777" class="Symbol">:</a> <a id="1779" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1785" class="Symbol">{</a><a id="1786" class="Argument">X</a> <a id="1788" class="Symbol">=</a> <a id="1790" href="Categories.Category.Monoidal.Core.html#1380" class="Function">unit</a><a id="1794" class="Symbol">}</a> <a id="1796" class="Symbol">(</a><a id="1797" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="1799" href="Categories.Category.Monoidal.Core.html#1536" class="Function Operator">⊗₁</a> <a id="1802" href="Categories.Category.Core.html#630" class="Function">id</a><a id="1804" class="Symbol">)</a> <a id="1806" href="Categories.Category.Core.html#595" class="Function Operator">≈</a> <a id="1808" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a>
    <a id="Traced.vanishing₂"></a><a id="1814" href="Categories.Category.Monoidal.Traced.html#1814" class="Field">vanishing₂</a>  <a id="1826" class="Symbol">:</a> <a id="1828" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1834" class="Symbol">{</a><a id="1835" class="Argument">X</a> <a id="1837" class="Symbol">=</a> <a id="1839" href="Categories.Category.Monoidal.Traced.html#415" class="Generalizable">X</a><a id="1840" class="Symbol">}</a> <a id="1842" class="Symbol">(</a><a id="1843" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1849" class="Symbol">{</a><a id="1850" class="Argument">X</a> <a id="1852" class="Symbol">=</a> <a id="1854" href="Categories.Category.Monoidal.Traced.html#417" class="Generalizable">Y</a><a id="1855" class="Symbol">}</a> <a id="1857" class="Symbol">(</a><a id="1858" href="Categories.Morphism.html#2022" class="Function">associator.to</a> <a id="1872" href="Categories.Category.Core.html#656" class="Function Operator">∘</a> <a id="1874" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="1876" href="Categories.Category.Core.html#656" class="Function Operator">∘</a> <a id="1878" href="Categories.Morphism.html#2005" class="Function">associator.from</a><a id="1893" class="Symbol">))</a>
                <a id="1912" href="Categories.Category.Core.html#595" class="Function Operator">≈</a> <a id="1914" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1920" class="Symbol">{</a><a id="1921" class="Argument">X</a> <a id="1923" class="Symbol">=</a> <a id="1925" href="Categories.Category.Monoidal.Traced.html#415" class="Generalizable">X</a> <a id="1927" href="Categories.Category.Monoidal.Core.html#1435" class="Function Operator">⊗₀</a> <a id="1930" href="Categories.Category.Monoidal.Traced.html#417" class="Generalizable">Y</a><a id="1931" class="Symbol">}</a> <a id="1933" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a>
    <a id="Traced.superposing"></a><a id="1939" href="Categories.Category.Monoidal.Traced.html#1939" class="Field">superposing</a> <a id="1951" class="Symbol">:</a> <a id="1953" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="1959" class="Symbol">{</a><a id="1960" class="Argument">X</a> <a id="1962" class="Symbol">=</a> <a id="1964" href="Categories.Category.Monoidal.Traced.html#415" class="Generalizable">X</a><a id="1965" class="Symbol">}</a> <a id="1967" class="Symbol">(</a><a id="1968" href="Categories.Morphism.html#2022" class="Function">associator.to</a> <a id="1982" href="Categories.Category.Core.html#656" class="Function Operator">∘</a> <a id="1984" href="Categories.Category.Core.html#630" class="Function">id</a> <a id="1987" class="Symbol">{</a><a id="1988" href="Categories.Category.Monoidal.Traced.html#417" class="Generalizable">Y</a><a id="1989" class="Symbol">}</a> <a id="1991" href="Categories.Category.Monoidal.Core.html#1536" class="Function Operator">⊗₁</a> <a id="1994" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a> <a id="1996" href="Categories.Category.Core.html#656" class="Function Operator">∘</a> <a id="1998" href="Categories.Morphism.html#2005" class="Function">associator.from</a><a id="2013" class="Symbol">)</a> <a id="2015" href="Categories.Category.Core.html#595" class="Function Operator">≈</a> <a id="2017" href="Categories.Category.Core.html#630" class="Function">id</a> <a id="2020" class="Symbol">{</a><a id="2021" href="Categories.Category.Monoidal.Traced.html#417" class="Generalizable">Y</a><a id="2022" class="Symbol">}</a> <a id="2024" href="Categories.Category.Monoidal.Core.html#1536" class="Function Operator">⊗₁</a> <a id="2027" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="2033" class="Symbol">{</a><a id="2034" class="Argument">X</a> <a id="2036" class="Symbol">=</a> <a id="2038" href="Categories.Category.Monoidal.Traced.html#415" class="Generalizable">X</a><a id="2039" class="Symbol">}</a> <a id="2041" href="Categories.Category.Monoidal.Traced.html#429" class="Generalizable">f</a>
    <a id="Traced.yanking"></a><a id="2047" href="Categories.Category.Monoidal.Traced.html#2047" class="Field">yanking</a>     <a id="2059" class="Symbol">:</a> <a id="2061" href="Categories.Category.Monoidal.Traced.html#1464" class="Field">trace</a> <a id="2067" class="Symbol">(</a><a id="2068" href="Categories.NaturalTransformation.Core.html#783" class="Function">braiding.⇒.η</a> <a id="2081" class="Symbol">(</a><a id="2082" href="Categories.Category.Monoidal.Traced.html#415" class="Generalizable">X</a> <a id="2084" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2086" href="Categories.Category.Monoidal.Traced.html#415" class="Generalizable">X</a><a id="2087" class="Symbol">))</a> <a id="2090" href="Categories.Category.Core.html#595" class="Function Operator">≈</a> <a id="2092" href="Categories.Category.Core.html#630" class="Function">id</a>
</pre></body></html>